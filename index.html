<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Medical Claim Notes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    h1 {
      text-align: center;
    }

    form {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    label {
      display: block;
      margin-bottom: 8px;
    }

    input, textarea, select {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    textarea {
      resize: vertical;
    }

    #textOutput {
      margin-top: 20px;
      width: 100%;
      height: 150px;
    }

    footer {
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>

  <h1>Medical Claim Notes</h1>

  <!-- The main form with basic details -->
  <form id="claimForm">
    <label for="lineNumber">Line Number:</label>
    <input type="text" id="lineNumber" name="lineNumber" required><br>

    <label for="previewText">Preview Box:</label>
    <textarea id="previewText" name="previewText" rows="4" cols="50" required></textarea><br>

    <label for="calledTo">Called To Box:</label>
    <input type="text" id="calledTo" name="calledTo" required><br>

    <label for="numberBox">Number Box:</label>
    <input type="text" id="numberBox" name="numberBox" required><br>

    <label for="speakWith">Speak With Box:</label>
    <input type="text" id="speakWith" name="speakWith" required><br>

    <label for="repInformation">Rep Information Box:</label>
    <textarea id="repInformation" name="repInformation" rows="4" cols="50" required></textarea><br>

    <label for="claimNumber">Claim# Box:</label>
    <input type="text" id="claimBox" name="claimBox" required><br>

    <label for="refNumber">Ref# Box:</label>
    <input type="text" id="refBox" name="refBox" required><br>

    <label for="endScenario">End Scenario:</label>
    <textarea id="endScenario" name="endScenario" rows="4" cols="50" required></textarea><br>

    <!-- Submit button to finalize the form -->
    <button type="submit" onclick="submitForm(event, 'claimForm')">Submit</button>

    <!-- Refresh button to reload the page -->
    <button type="button" onclick="refreshPage()">Refresh</button>
  </form>

  <!-- Result section to display entered information as text output -->
  <textarea id="textOutput" rows="10" cols="50" readonly></textarea>

  <footer>Developed by Saalim Labs</footer>

  <script>
  // Load Typo.js with an English dictionary
  const dictionary = new Typo("en_US");

  // Attach event listener to the "Rep Information Box" for input events
  const repInformationBox = document.getElementById("repInformation");
  repInformationBox.addEventListener("input", handleInput);

  function handleInput() {
    const inputText = repInformationBox.value;
    const checkedText = spellCheck(inputText);

    repInformationBox.value = checkedText;

    // Optionally, you can provide visual feedback for misspelled words
    if (checkedText !== inputText) {
      repInformationBox.style.border = "2px solid red"; // Example: Red border for misspelled words
    } else {
      repInformationBox.style.border = "1px solid #ccc"; // Reset border for correctly spelled words
    }
  }

  function spellCheck(text) {
    const words = text.split(' ');
    const checkedWords = words.map(word => {
      const correctedWord = getCorrection(word);
      return correctedWord ? `*${word} (${correctedWord})*` : word;
    });

    return checkedWords.join(' ');
  }

  function getCorrection(word) {
    const suggestions = dictionary.suggest(word);
    return suggestions.length > 0 ? suggestions[0] : null;
  }

  function submitForm(event, formId) {
    event.preventDefault();

    // Remove the asterisks from the submitted text
    const formData = new FormData(document.getElementById(formId));
    const resultText = `LINE#${formData.get('lineNumber')} AS PER THE REVIEW THE CLAIM GOT DENIED AS ${formData.get('previewText').toUpperCase()} SO CALLED ${formData.get('calledTo').toUpperCase()} ${formData.get('numberBox').toUpperCase()} SW ${formData.get('speakWith').toUpperCase()} REP SAID ${spellCheck(formData.get('repInformation').toUpperCase())}`;

    document.getElementById("textOutput").value = resultText;
  }

  function refreshPage() {
    location.reload();
  }
</script>

</body>
</html>
